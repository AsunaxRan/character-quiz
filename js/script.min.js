/***************************
File generated by shrinker.ch
DateTime: 2018-09-22, 11:17:15
File list:
* script.js
*****************************/
var img_path="imgs/dist/characters/",quiz_list=[],total_quiz=15,current_quiz=0,total_point=0,current_point=0,timer,time_remaining=5,quiz_correct_count,combo=0,current_quiz_item,using_star_at=-1,using_clock_at=-1,using_magic_at=-1;$(window).on("load",function(){$(".preloader").fadeOut("fast")});function reset(){combo=quiz_correct_count=current_point=total_point=current_quiz=0;using_magic_at=using_clock_at=using_star_at=-1}
function getData(){$.getJSON("data/characters.json",function(a){$.each(a,function(b,c){quiz_list.push(c)})})}function shuffle(a){for(var b=a.length;b>0;){var c=Math.floor(Math.random()*b);b--;var d=a[b];a[b]=a[c];a[c]=d}return a}
function makeQuiz(){shuffle(quiz_list);for(var a=0;a<total_quiz;a++){var b=[[1,quiz_list[a][1]],[0,quiz_list[a][3][0]],[0,quiz_list[a][3][1]],[0,quiz_list[a][3][2]]];shuffle(b);b='<div class="quiz-item" data-item="'+a+'"><div class="hidden-character"><div class="img-holder"><img src="'+img_path+quiz_list[a][2]+'" alt="Hidden character" class="'+(Math.floor(Math.random()*2)==1?"mirror":"")+' lazy img-responsiveY hidden-character-item"></div></div><div class="answers"><div class="option"><button class="btn full-width text-ellipsis answer" data-correct="'+
b[0][0]+'" onclick="check(this)">'+b[0][1]+'</button></div><div class="option"><button class="btn full-width text-ellipsis answer" data-correct="'+b[1][0]+'" onclick="check(this)">'+b[1][1]+'</button></div><div class="option"><button class="btn full-width text-ellipsis answer" data-correct="'+b[2][0]+'" onclick="check(this)">'+b[2][1]+'</button></div><div class="option"><button class="btn full-width text-ellipsis answer" data-correct="'+b[3][0]+'" onclick="check(this)">'+b[3][1]+"</button></div></div></div>";
$(".quiz-wrap").append(b)}}function clean(){$(".quiz-wrap").html("");$("#total-point").text(total_point);$("#current-quiz").text(current_quiz);$("#total-quiz").text(total_quiz);$(".tool").removeClass("active disabled")}
function timing(){time_remaining=5;$("#progress").css("width","100%");timer=setInterval(function(){time_remaining-=0.5;$("#progress").css("width",time_remaining*20+"%");if(time_remaining==0){clearInterval(timer);$(current_quiz_item).find(".answer").css("pointer-events","none");$("#music-miss")[0].play();combo=0;if(using_star_at==current_quiz){total_point/=2;counter(current_point,total_point,"#total-point",500)}}},500)}function openScreen(a){$(".screen").removeClass("open");$(a).addClass("open")}
function play(){reset();clean();makeQuiz();openScreen("#in-process");$("#music-bg")[0].volumn=0.7;$("#music-bg")[0].play();nextQuiz()}function activeTool(a){var b=$(a).data("item");$(a).addClass("active");switch(b){case "star":using_star_at=current_quiz+1;break;case "magic":using_magic_at=current_quiz;$(current_quiz_item).find(".hidden-character-item").addClass("magic");break;case "clock":using_clock_at=current_quiz;clearInterval(timer)}}
function disableTool(a){$(a).removeClass("active");$(a).addClass("disabled")}function counter(a,b,c,d){$({Counter:a}).animate({Counter:b},{duration:d,easing:"swing",step:function(){$(c).text(Math.ceil(this.Counter))},complete:function(){$(c).text(b)}})}
function check(a){var b=$(a).data("correct");$(current_quiz_item).find(".answer").css("pointer-events","none");clearInterval(timer);if(b){$(a).addClass("correct");$(current_quiz_item).find(".hidden-character-item").addClass("show");quiz_correct_count++;combo++;$(".bonus").addClass("show");$("#bonus-combo").text(combo);total_point+=using_star_at!=current_quiz?time_remaining*100*combo:time_remaining*100*combo*2;$("#music-correct")[0].play();counter(current_point,total_point,"#total-point",500)}else{$(a).addClass("incorrect");
combo=0;if(using_star_at==current_quiz){total_point/=2;counter(current_point,total_point,"#total-point",500)}$("#music-incorrect")[0].play()}}
function nextQuiz(){$(".bonus").removeClass("show");clearInterval(timer);current_point=total_point;if(current_quiz==total_quiz)endQuiz();else{current_quiz++;current_quiz_item=$(".quiz-item:nth-child("+current_quiz+")");$(".quiz-item").removeClass("show");$(current_quiz_item).addClass("show");$("#current-quiz").text(current_quiz);using_clock_at!=-1&&using_clock_at<current_quiz&&disableTool("#item-clock");using_magic_at!=-1&&using_magic_at<current_quiz&&disableTool("#item-magic");using_star_at!=-1&&
using_star_at<current_quiz&&disableTool("#item-star");timing()}}function endQuiz(){openScreen("#end");counter(0,total_point,"#end-point",1E3);$("#number-correct").text(quiz_correct_count);$("#number-incorrect").text(total_quiz-quiz_correct_count);$("#music-bg")[0].pause();quiz_correct_count>total_quiz/2?$("#music-end")[0].play():$("#music-gameover")[0].play();var a=quiz_correct_count/total_quiz*100;$("#shape-correct").css("width",a+"%");$("#shape-incorrect").css("width",100-a+"%")}getData();
