/***************************
File generated by shrinker.ch
DateTime: 2018-09-17, 19:43:12
File list:
* script.js
*****************************/
var img_path="imgs/characters/",quiz_list=[],total_quiz=15,current_quiz=0,total_point=0,timer,time_remaining=5,quiz_correct_count,combo=0,current_quiz_item;function reset(){combo=quiz_correct_count=total_point=current_quiz=0}function getData(){$.getJSON("data/characters.json",function(a){$.each(a,function(b,c){quiz_list.push(c)})})}function shuffle(a){for(var b=a.length;b>0;){var c=Math.floor(Math.random()*b);b--;var d=a[b];a[b]=a[c];a[c]=d}return a}
function makeQuiz(){shuffle(quiz_list);for(var a=0;a<total_quiz;a++){var b=[[1,quiz_list[a][1]],[0,quiz_list[a][3][0]],[0,quiz_list[a][3][1]],[0,quiz_list[a][3][2]]];shuffle(b);b='<div class="quiz-item" data-item="'+a+'"><div class="hidden-character"><div class="img-holder"><img src="'+img_path+quiz_list[a][2]+'" alt="Hidden character" class="img-responsiveY hidden-character-item"></div></div><div class="answers"><div class="option"><button class="btn full-width text-ellipsis answer" data-correct="'+
b[0][0]+'" onclick="check(this)">'+b[0][1]+'</button></div><div class="option"><button class="btn full-width text-ellipsis answer" data-correct="'+b[1][0]+'" onclick="check(this)">'+b[1][1]+'</button></div><div class="option"><button class="btn full-width text-ellipsis answer" data-correct="'+b[2][0]+'" onclick="check(this)">'+b[2][1]+'</button></div><div class="option"><button class="btn full-width text-ellipsis answer" data-correct="'+b[3][0]+'" onclick="check(this)">'+b[3][1]+"</button></div></div></div>";
$(".quiz-wrap").append(b)}}function clean(){$(".quiz-wrap").html("");$("#total-point").text(total_point);$("#current-quiz").text(current_quiz);$("#total-quiz").text(total_quiz)}function timing(){time_remaining=5;$("#progress").css("width","100%");timer=setInterval(function(){time_remaining-=0.5;$("#progress").css("width",time_remaining*20+"%");if(time_remaining==0){clearInterval(timer);$(current_quiz_item).find(".answer").css("pointer-events","none");$("#music-miss")[0].play()}},500)}
function openScreen(a){$(".screen").removeClass("open");$(a).addClass("open")}function play(){reset();clean();makeQuiz();openScreen("#in-process");nextQuiz()}function counter(a,b){$({Counter:a}).animate({Counter:b},{duration:500,easing:"swing",step:function(){$("#total-point").text(Math.ceil(this.Counter))},complete:function(){$("#total-point").text(b)}})}
function check(a){var b=$(a).data("correct");$(current_quiz_item).find(".answer").css("pointer-events","none");clearInterval(timer);if(b){$(a).addClass("correct");$(current_quiz_item).find(".hidden-character-item").addClass("show");quiz_correct_count++;combo++;$(".bonus").addClass("show");$("#bonus-combo").text(combo);a=total_point;total_point+=time_remaining*100*combo;counter(a,total_point);$("#music-correct")[0].play()}else{$(a).addClass("incorrect");combo=0;$("#music-incorrect")[0].play()}}
function nextQuiz(){$("#music-bg")[0].volumn=0.7;$(".bonus").removeClass("show");if(current_quiz==total_quiz)endQuiz();else{current_quiz++;current_quiz_item=$(".quiz-item:nth-child("+current_quiz+")");$(".quiz-item").removeClass("show");$(current_quiz_item).addClass("show");$("#current-quiz").text(current_quiz);clearInterval(timer);timing()}}
function endQuiz(){openScreen("#end");$("#end-point").text(total_point);$("#number-correct").text(quiz_correct_count);$("#number-incorrect").text(total_quiz-quiz_correct_count);$("#music-bg")[0].pause();quiz_correct_count>total_quiz/2?$("#music-end")[0].play():$("#music-gameover")[0].play();var a=quiz_correct_count/total_quiz*100;$("#shape-correct").css("width",a+"%");$("#shape-incorrect").css("width",100-a+"%")}
function rePlay(){openScreen("#begin");$("#music-bg")[0].load();$("#music-bg")[0].play()}getData();
